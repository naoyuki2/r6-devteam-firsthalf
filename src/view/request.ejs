<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %></title>
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.5.0/font/bootstrap-icons.min.css"
    />
    <style>
      .form-container {
        max-width: 500px;
        margin: 50px auto;
        padding: 20px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        background-color: #fff;
        border-radius: 10px;
      }

      .form-group label {
        color: #000;
        font-weight: bold;
        position: relative;
        padding-left: 20px;
      }

      .form-group label::before {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 5px;
        height: 100%;
        background-color: #17a2b8;
        border-radius: 3px;
      }

      .form-control {
        border-radius: 5px;
        border: 1px solid #ccc;
        box-shadow: none;
      }

      .submit-btn {
        background-color: #4db8ff;
        color: white;
        font-weight: bold;
        border-radius: 5px;
      }

      .submit-btn:hover {
        background-color: #3399ff;
      }

      .form-title {
        text-align: center;
        font-size: 24px;
        margin-bottom: 20px;
      }

      textarea {
        resize: none;
      }
      input.form-control {
        margin-bottom: 8px;
      }
      select.form-control {
        margin-bottom: 8px;
      }
      .d-flex input {
        margin-right: 5px;
      }

      .d-flex input:last-child {
        margin-right: 0;
      }

      .add-item-btn {
        cursor: pointer;
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="form-container">
        <h3 class="form-title"><%= title %></h3>
        <form action="/submit-request" method="POST">
          <div class="form-group">
            <label for="title">タイトル</label>
            <input
              type="text"
              class="form-control"
              id="title"
              name="title"
              placeholder="例）＊＊＊限定グッズを購入してほしい！"
              required
            />
          </div>

          <div class="form-group">
            <label for="locationPrefecture">入手場所（都道府県）</label>
            <select
              class="form-control"
              id="locationPrefecture"
              name="locationPrefecture"
              required
            ></select>
          </div>

          <div class="form-group">
            <label for="locationDetail">入手場所（詳細情報）</label>
            <input
              type="text"
              class="form-control"
              id="locationDetail"
              name="locationDetail"
              placeholder="例）東京ビッグサイト"
              required
            />
          </div>

          <div class="form-group">
            <label for="deliveryPlace">受け渡し場所</label>
            <input
              type="text"
              class="form-control"
              id="deliveryPlace"
              name="deliveryPlace"
              placeholder="例）新宿駅東口"
              required
            />
          </div>

          <div class="form-group">
            <label for="deliveryDate">受け渡し日時</label>
            <input
              type="date"
              class="form-control"
              id="deliveryDate"
              name="deliveryDate"
              required
            />
          </div>

          <div id="item-fields">
            <div class="form-group item-field">
              <label for="item1">欲しいもの1</label>
              <input
                type="text"
                class="form-control"
                id="item1"
                name="item1"
                placeholder="例）＊＊＊のTシャツ"
                required
              />
              <div class="d-flex align-items-center">
                <select class="form-control" name="quantity1" required>
                  <option value="">個数</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                </select>
                <span>個</span>
                <input
                  type="number"
                  class="form-control ml-2"
                  name="price1"
                  placeholder="金額"
                  required
                />
                <span>円</span>
              </div>
            </div>
          </div>

          <div class="text-right">
            <span class="add-item-btn"> <i class="bi bi-plus"></i> 追加 </span>
          </div>

          <div class="form-group mt-3">
            <label for="details">詳細情報</label>
            <textarea
              class="form-control"
              id="details"
              name="details"
              rows="5"
              placeholder="例）〇〇フェスで手に入る限定グッズをお願いしたいです。希望するアイテムは以下です。"
              required
            ></textarea>
          </div>

          <button type="submit" class="btn submit-btn btn-block">
            この内容で依頼を投稿
          </button>
        </form>
      </div>
    </div>

    <script>
      let itemCount = 1
      const maxItems = 10
      const itemFields = document.getElementById('item-fields')
      const addItemBtn = document.querySelector('.add-item-btn')

      addItemBtn.addEventListener('click', function () {
        if (itemCount < maxItems) {
          itemCount++
          const newItem = document.createElement('div')
          newItem.classList.add('form-group', 'item-field')
          newItem.innerHTML = `
            <label for="item${itemCount}">欲しいもの${itemCount}</label>
            <input
              type="text"
              class="form-control"
              id="item${itemCount}"
              name="item${itemCount}"
              placeholder="例）＊＊＊のTシャツ"
              required
            />
            <div class="d-flex align-items-center">
              <select class="form-control" name="quantity${itemCount}" required>
                <option value="">個数</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
               
              </select>
              <span>個</span>
              <input
                type="number"
                class="form-control ml-2"
                name="price${itemCount}"
                placeholder="金額"
                required
              />
              <span>円</span>
            </div>
          `
          itemFields.appendChild(newItem)
        } else {
          alert('追加できる欲しいものは最大10個までです。')
        }
      })

      const prefectures = [
        '北海道',
        '青森県',
        '岩手県',
        '宮城県',
        '秋田県',
        '山形県',
        '福島県',
        '茨城県',
        '栃木県',
        '群馬県',
        '埼玉県',
        '千葉県',
        '東京都',
        '神奈川県',
        '新潟県',
        '富山県',
        '石川県',
        '福井県',
        '山梨県',
        '長野県',
        '岐阜県',
        '静岡県',
        '愛知県',
        '三重県',
        '滋賀県',
        '京都府',
        '大阪府',
        '兵庫県',
        '奈良県',
        '和歌山県',
        '鳥取県',
        '島根県',
        '岡山県',
        '広島県',
        '山口県',
        '徳島県',
        '香川県',
        '愛媛県',
        '高知県',
        '福岡県',
        '佐賀県',
        '長崎県',
        '熊本県',
        '大分県',
        '宮崎県',
        '鹿児島県',
        '沖縄県',
      ]

      const selectElement = document.getElementById('locationPrefecture')

      prefectures.forEach((prefecture) => {
        const option = document.createElement('option')
        option.value = prefecture
        option.textContent = prefecture
        selectElement.appendChild(option)
      })
    </script>
  </body>
</html>
